#!/usr/bin/env php
<?php

require __DIR__ . '/../vendor/autoload.php';

use App\Application;

$loop = React\EventLoop\Factory::create();

$app = new Application($loop);

$socket = new React\Socket\Server($loop);
$http = new React\Http\Server($socket, $loop);

$http->on('request', [$app, 'onRequest']);
echo "Server running at http://0.0.0.0:1337" . PHP_EOL;

$socket->listen(1337, '0.0.0.0');
$loop->run();
